object frmEstoqueOsso: TfrmEstoqueOsso
  Left = 0
  Top = 0
  BorderIcons = [biSystemMenu]
  BorderStyle = bsSingle
  Caption = 'Estoque com Osso'
  ClientHeight = 797
  ClientWidth = 642
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  Position = poScreenCenter
  OnShow = FormShow
  PixelsPerInch = 96
  TextHeight = 13
  object Label1: TLabel
    Left = 8
    Top = 20
    Width = 33
    Height = 13
    Caption = 'Abate:'
  end
  object Label2: TLabel
    Left = 251
    Top = 20
    Width = 56
    Height = 13
    Caption = 'Habilita'#231#227'o:'
  end
  object DBGrid1: TDBGrid
    Left = 8
    Top = 39
    Width = 626
    Height = 750
    DataSource = DataSource1
    TabOrder = 0
    TitleFont.Charset = DEFAULT_CHARSET
    TitleFont.Color = clWindowText
    TitleFont.Height = -11
    TitleFont.Name = 'Tahoma'
    TitleFont.Style = []
    Columns = <
      item
        Alignment = taCenter
        Expanded = False
        FieldName = 'cod_prod'
        Title.Alignment = taCenter
        Title.Caption = 'Produto'
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clMaroon
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = [fsBold]
        Width = 222
        Visible = True
      end
      item
        Alignment = taCenter
        Expanded = False
        FieldName = 'tipo'
        Title.Alignment = taCenter
        Title.Caption = 'Tipo'
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clMaroon
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = [fsBold]
        Width = 82
        Visible = True
      end
      item
        Alignment = taCenter
        Expanded = False
        FieldName = 'data_abate'
        Title.Alignment = taCenter
        Title.Caption = 'Data Abate'
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clMaroon
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = [fsBold]
        Width = 89
        Visible = True
      end
      item
        Alignment = taCenter
        Expanded = False
        FieldName = 'habilitacao'
        Title.Alignment = taCenter
        Title.Caption = 'Habilita'#231#227'o'
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clMaroon
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = [fsBold]
        Width = 126
        Visible = True
      end
      item
        Alignment = taCenter
        Expanded = False
        FieldName = 'quant'
        Title.Alignment = taCenter
        Title.Caption = 'Quantidade'
        Title.Font.Charset = DEFAULT_CHARSET
        Title.Font.Color = clMaroon
        Title.Font.Height = -11
        Title.Font.Name = 'Tahoma'
        Title.Font.Style = [fsBold]
        Visible = True
      end>
  end
  object btnAtualiza: TBitBtn
    Left = 559
    Top = 8
    Width = 75
    Height = 25
    Caption = 'Atualizar'
    TabOrder = 1
    OnClick = btnAtualizaClick
  end
  object DateTimePicker1: TDateTimePicker
    Left = 47
    Top = 15
    Width = 97
    Height = 21
    Date = 43858.609097094910000000
    Time = 43858.609097094910000000
    Enabled = False
    TabOrder = 2
    OnChange = DateTimePicker1Change
  end
  object CheckBox1: TCheckBox
    Left = 149
    Top = 16
    Width = 44
    Height = 17
    Caption = 'Tudo'
    Checked = True
    State = cbChecked
    TabOrder = 3
    OnClick = CheckBox1Click
  end
  object ComboBox1: TComboBox
    Left = 313
    Top = 14
    Width = 80
    Height = 21
    ItemIndex = 0
    TabOrder = 4
    OnChange = ComboBox1Change
    Items.Strings = (
      ''
      'UA'
      'LG'
      'NE'
      'CHINA'
      'ARAB'
      'HAL')
  end
  object ZQuery1: TZQuery
    Connection = frmMenu.ZConnection1
    SQL.Strings = (
      'declare @abate date = cast(:abate as date)'
      'declare @hab varchar(20) = :hab'
      ''
      'select * from ('
      'select t.cod_prod,'
      '       t.tipo,'
      #9'   cast(data_abate as date) as data_abate,'
      
        #9'   concat(rtrim(isnull(ras1.class_rastr, t.class_rastr)), case ' +
        'when (isnull(ras2.class_rastr2, t.class_rastr2)) <> '#39#39' then conc' +
        'at('#39'-'#39', rtrim(isnull(ras2.class_rastr2, t.class_rastr2))) end, c' +
        'ase when (isnull(ras3.class_rastr3, t.class_rastr3)) <> '#39#39' then ' +
        'concat('#39'-'#39', rtrim(isnull(ras3.class_rastr3, t.class_rastr3))) en' +
        'd, case when (isnull(ras4.class_rastr4, t.class_rastr4)) <> '#39#39' t' +
        'hen concat('#39'-'#39', rtrim(isnull(ras4.class_rastr4, t.class_rastr4))' +
        ') end) as habilitacao,'
      #9'   count(1) as quant'
      'from ('
      
        'select '#39'011000 - TRASEIRO BOI'#39' as cod_prod, '#39'ABATE'#39' as tipo, dat' +
        'a_abate, cod_tras as cod_barra, class_rastr, class_rastr2, class' +
        '_rastr3, class_rastr4 from t_pescarcaca  where data_sai_tras is ' +
        'null and sexo = 1'
      'union all'
      
        'select '#39'011016 - TRASEIRO VACA'#39' as cod_prod, '#39'ABATE'#39' as tipo, da' +
        'ta_abate, cod_tras as cod_barra, class_rastr, class_rastr2, clas' +
        's_rastr3, class_rastr4 from t_pescarcaca where data_sai_tras is ' +
        'null and sexo = 2'
      'union all'
      
        'select '#39'011001 - DIANTEIRO BOI'#39' as cod_prod, '#39'ABATE'#39' as tipo, da' +
        'ta_abate, cod_tras as cod_barra, class_rastr, class_rastr2, clas' +
        's_rastr3, class_rastr4 from t_pescarcaca where data_sai_diant is' +
        ' null and sexo = 1'
      'union all'
      
        'select '#39'011017 - DIANTEIRO VACA'#39' as cod_prod, '#39'ABATE'#39' as tipo, d' +
        'ata_abate, cod_tras as cod_barra, class_rastr, class_rastr2, cla' +
        'ss_rastr3, class_rastr4 from t_pescarcaca where data_sai_diant i' +
        's null and sexo = 2'
      'union all'
      
        'select '#39'011004 - PONTA AGULHA BOI'#39' as cod_prod, '#39'ABATE'#39' as tipo,' +
        ' data_abate, cod_tras as cod_barra, class_rastr, class_rastr2, c' +
        'lass_rastr3, class_rastr4 from t_pescarcaca where data_sai_pa is' +
        ' null and sexo = 1'
      'union all'
      
        'select '#39'011010 - PONTA AGULHA VACA'#39' as cod_prod, '#39'ABATE'#39' as tipo' +
        ', data_abate, cod_tras as cod_barra, class_rastr, class_rastr2, ' +
        'class_rastr3, class_rastr4 from t_pescarcaca where data_sai_pa i' +
        's null and sexo = 2'
      ') t'
      'left join t_historico_rastr  ras1 on ras1.cod_tras = t.cod_barra'
      'left join t_historico_rastr2 ras2 on ras2.cod_tras = t.cod_barra'
      'left join t_historico_rastr3 ras3 on ras3.cod_tras = t.cod_barra'
      'left join t_historico_rastr4 ras4 on ras4.cod_tras = t.cod_barra'
      
        'group by t.cod_prod, t.tipo, cast(data_abate as date), concat(rt' +
        'rim(isnull(ras1.class_rastr, t.class_rastr)), case when (isnull(' +
        'ras2.class_rastr2, t.class_rastr2)) <> '#39#39' then concat('#39'-'#39', rtrim' +
        '(isnull(ras2.class_rastr2, t.class_rastr2))) end, case when (isn' +
        'ull(ras3.class_rastr3, t.class_rastr3)) <> '#39#39' then concat('#39'-'#39', r' +
        'trim(isnull(ras3.class_rastr3, t.class_rastr3))) end, case when ' +
        '(isnull(ras4.class_rastr4, t.class_rastr4)) <> '#39#39' then concat('#39'-' +
        #39', rtrim(isnull(ras4.class_rastr4, t.class_rastr4))) end)'
      ''
      'union all'
      ''
      
        'select t.cod_prod, t.tipo, t.data_abate, t.habilitacao, count (1' +
        ') as quant from ('
      
        'select case when pes.cod_prod = '#39'011000'#39' then '#39'011000 - TRASEIRO' +
        ' BOI'#39
      
        '            when pes.cod_prod = '#39'011001'#39' then '#39'011001 - DIANTEIR' +
        'O DE BOI'#39
      #9#9#9'when pes.cod_prod = '#39'011004'#39' then '#39'011004 - PONTA AGULHA BOI'#39
      
        #9#9#9'when pes.cod_prod = '#39'011010'#39' then '#39'011010 - PONTA AGULHA VACA' +
        #39
      #9#9#9'when pes.cod_prod = '#39'011016'#39' then '#39'011016 - TRASEIRO VACA'#39
      
        #9#9#9'when pes.cod_prod = '#39'011017'#39' then '#39'011017 - DIANTEIRO VACA'#39' e' +
        'nd as cod_prod,'
      '       '#39'TENDAL'#39' as tipo,'
      #9'   cast(pes.data_abate as date) as data_abate,'
      
        #9'   concat(rtrim(ras.class_rastr), case when ras.class_rastr2 <>' +
        ' '#39#39' then concat('#39'-'#39', rtrim(ras.class_rastr2)) end, case when ras' +
        '.class_rastr3 <> '#39#39' then concat('#39'-'#39', rtrim(ras.class_rastr3)) en' +
        'd, case when ras.class_rastr4 <> '#39#39' then concat('#39'-'#39', rtrim(ras.c' +
        'lass_rastr4)) end) as habilitacao'
      'from pescaixa pes'
      
        'inner join rastreabilidade_pesagem ras on ras.cod_barra = pes.co' +
        'd_barra'
      
        'and pes.cod_prod in ('#39'011000'#39','#39'011001'#39','#39'011004'#39','#39'011010'#39','#39'011016' +
        #39','#39'011017'#39')'
      'and pes.data_sai is null'
      ') t'
      'group by t.cod_prod, t.tipo, t.data_abate, t.habilitacao'
      ') x'
      
        'where @abate = case when @abate <> '#39#39' then x.data_abate else @ab' +
        'ate end'
      
        'and x.habilitacao like case when @hab <> '#39#39' then '#39'%'#39'+@hab+'#39'%'#39' el' +
        'se x.habilitacao end'
      ''
      'order by 1, 3, 4')
    Params = <
      item
        DataType = ftUnknown
        Name = 'abate'
        ParamType = ptUnknown
      end
      item
        DataType = ftUnknown
        Name = 'hab'
        ParamType = ptUnknown
      end>
    Left = 200
    Top = 360
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'abate'
        ParamType = ptUnknown
      end
      item
        DataType = ftUnknown
        Name = 'hab'
        ParamType = ptUnknown
      end>
    object ZQuery1cod_prod: TWideStringField
      FieldName = 'cod_prod'
      ReadOnly = True
      Size = 26
    end
    object ZQuery1tipo: TWideStringField
      FieldName = 'tipo'
      ReadOnly = True
      Size = 6
    end
    object ZQuery1data_abate: TWideStringField
      FieldName = 'data_abate'
      ReadOnly = True
    end
    object ZQuery1habilitacao: TWideStringField
      FieldName = 'habilitacao'
      ReadOnly = True
      Size = 23
    end
    object ZQuery1quant: TIntegerField
      FieldName = 'quant'
      ReadOnly = True
    end
  end
  object DataSource1: TDataSource
    DataSet = ZQuery1
    Left = 232
    Top = 360
  end
end
